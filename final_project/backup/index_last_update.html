<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mengjia Wei">
<meta name="dcterms.date" content="2025-08-11">
<meta name="keywords" content="PGM, Unemployment Rate, Race, Industry, Causal Inference">

<title>Causal Inference of Labor Market Inequality Using PGM: A multidimensional analysis of unemployment rate and durations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8a894fcc3cb5e37eb5bf30def131be2f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta name="citation_title" content="Causal Inference of Labor Market Inequality Using PGM: A multidimensional analysis of unemployment rate and durations">
<meta name="citation_abstract" content="This study investigates the causal relationships between race, industry, recent graduate, education attainment and unemployment rates in the United States by applying probabilistic graphical modeling (PGM) to uncover latent dependency structures across demographic and industry variables. Using a PGM framework, we construct conditional dependence networks to examine two primary dimensions: racial disparities and industry-specific unemployment dynamics. The analysis first explores the effect of race on unemployment disparities, followed by a sectoral analysis focused on Educational and Health Services, Financial Activities, Public Administration, Information, Leisure and Hospitality, Manufacturing, Professional and Business Services, Transportation and Utilities, and Wholesale and Retail Trade. This study aims to identify whether certain groups—such as Black workers and those employed in Leisure and Hospitality—face heightened unemployment risk, providing a more comprehensive view of labor market hardship. The model estimates the strength and direction of probabilistic dependencies using Bayesian structure learning algorithms, based on BLS Current Population Survey (CPS) data from 2015 to 2025. Findings reveal significant causal effects between race and industry on unemployment. In particular, Black workers in the Leisure and Hospitality sector face notably higher unemployment vulnerability compared to their White and Asian counterparts. Moreover, Leisure and Hospitality exhibits the strongest positive causal effect on unemployment likelihood. This study also explores the causal inference of the recent graduates on unemployment rate under the interactive effect with their education attainment (Bachelor&amp;amp;#039;s or Master's) in order to understand whether recent graduates have higher unemployment rate than non-recent graduates in 2025, and the difference between persons who have Bachelor's degree vs. those with Master's degree. These results contribute to the growing literature leveraging PGMs for social inference (e.g., Li et al., 2022), and demonstrate the model’s utility in uncovering structural labor market inequalities across population subgroups.
">
<meta name="citation_keywords" content="PGM,Unemployment Rate,Race,Industry,Causal Inference">
<meta name="citation_author" content="Mengjia Wei">
<meta name="citation_publication_date" content="2025-08-11">
<meta name="citation_cover_date" content="2025-08-11">
<meta name="citation_year" content="2025">
<meta name="citation_online_date" content="2025-08-11">
<meta name="citation_language" content="en">
<meta name="citation_journal_title" content="Georgetown Univeristy DSAN 5650 Journal">
<meta name="citation_reference" content="citation_title=Strategies for the development of volcanic hazard maps in monogenetic volcanic fields: The example of La Palma (Canary Islands);,citation_author=José Marrero;,citation_author=Alicia García;,citation_author=Manuel Berrocoso;,citation_author=Ángeles Llinares;,citation_author=Antonio Rodríguez-Losada;,citation_author=R. Ortiz;,citation_publication_date=2019-07;,citation_cover_date=2019-07;,citation_year=2019;,citation_doi=10.1186/s13617-019-0085-5;,citation_volume=8;,citation_journal_title=Journal of Applied Volcanology;">
<meta name="citation_reference" content="citation_title=Understanding black-white disparities in labor market outcomes requires models that account for persistent discrimination and unequal bargaining power;,citation_author=Valerie Wilson;,citation_author=William Darity-Jr.;,citation_publication_date=2022-03;,citation_cover_date=2022-03;,citation_year=2022;,citation_journal_title=Economic Policy Institute;">
<meta name="citation_reference" content="citation_title=Gender differences in unemployment trends: Race, jobs and the economy update for february 2024;,citation_author=Estee Smith Joseph Dean;,citation_publication_date=2024-03;,citation_cover_date=2024-03;,citation_year=2024;,citation_journal_title=NCRC;">
<meta name="citation_reference" content="citation_title=US UNEMPLOYMENT RATE BY INDUSTRY (2024);,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_journal_title=Oberlo;">
<meta name="citation_reference" content="citation_title=Degrees at risk: 10 US college majors with the highest unemployment rate in 2025;,citation_author=undefined TOIEducation;,citation_publication_date=2025-07;,citation_cover_date=2025-07;,citation_year=2025;,citation_journal_title=The Times Of India;">
<meta name="citation_reference" content="citation_title=Unemployment by industry: Duration must be considered, too;,citation_author=Paul Morris YiLi Chien;,citation_publication_date=2016-01;,citation_cover_date=2016-01;,citation_year=2016;,citation_journal_title=Federal Reserve Bank of St.Lois - Regional Economist;">
</head>

<body class="quarto-light">

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Causal Inference of Labor Market Inequality Using PGM: A multidimensional analysis of unemployment rate and durations</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Author</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Mengjia Wei <a href="mailto:mw1296@georgetown.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Georgetown University
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
                <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">August 11, 2025</p>
            </div>
          </div>
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      <div class="quarto-alternate-formats"><div class="quarto-title-meta-heading">Other Formats</div><div class="quarto-title-meta-contents"><p><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></p></div><div class="quarto-title-meta-contents"><p><a href="index.pdf"><i class="bi bi-file-pdf"></i>PDF (agu)</a></p></div><div class="quarto-title-meta-contents"><p><a href="index-meca.zip" data-meca-link="true"><i class="bi bi-archive"></i>MECA Bundle</a></p></div></div></div>
    </div>

    <div>
      <div class="abstract">
        <div class="block-title">Abstract</div>
        <p>This study investigates the causal relationships between race, industry, recent graduate, education attainment and unemployment rates in the United States by applying probabilistic graphical modeling (PGM) to uncover latent dependency structures across demographic and industry variables. Using a PGM framework, we construct conditional dependence networks to examine two primary dimensions: racial disparities and industry-specific unemployment dynamics. The analysis first explores the effect of race on unemployment disparities, followed by a sectoral analysis focused on Educational and Health Services, Financial Activities, Public Administration, Information, Leisure and Hospitality, Manufacturing, Professional and Business Services, Transportation and Utilities, and Wholesale and Retail Trade. This study aims to identify whether certain groups—such as Black workers and those employed in Leisure and Hospitality—face heightened unemployment risk, providing a more comprehensive view of labor market hardship. The model estimates the strength and direction of probabilistic dependencies using Bayesian structure learning algorithms, based on BLS Current Population Survey (CPS) data from 2015 to 2025. Findings reveal significant causal effects between race and industry on unemployment. In particular, Black workers in the Leisure and Hospitality sector face notably higher unemployment vulnerability compared to their White and Asian counterparts. Moreover, Leisure and Hospitality exhibits the strongest positive causal effect on unemployment likelihood. This study also explores the causal inference of the recent graduates on unemployment rate under the interactive effect with their education attainment (Bachelor’s or Master’s) in order to understand whether recent graduates have higher unemployment rate than non-recent graduates in 2025, and the difference between persons who have Bachelor’s degree vs.&nbsp;those with Master’s degree. These results contribute to the growing literature leveraging PGMs for social inference (e.g., Li et al., 2022), and demonstrate the model’s utility in uncovering structural labor market inequalities across population subgroups.</p>
      </div>
    </div>

    <div>
      <div class="keywords">
        <div class="block-title">Keywords</div>
        <p>PGM, Unemployment Rate, Race, Industry, Causal Inference</p>
      </div>
    </div>

    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="header-section-number">2</span> Data</a></li>
  <li><a href="#eda" id="toc-eda" class="nav-link" data-scroll-target="#eda"><span class="header-section-number">3</span> EDA</a>
  <ul class="collapse">
  <li><a href="#unemployment-rates-of-differenet-races" id="toc-unemployment-rates-of-differenet-races" class="nav-link" data-scroll-target="#unemployment-rates-of-differenet-races"><span class="header-section-number">3.1</span> Unemployment Rates of Differenet Races</a></li>
  <li><a href="#unemployment-rates-of-differenet-industries" id="toc-unemployment-rates-of-differenet-industries" class="nav-link" data-scroll-target="#unemployment-rates-of-differenet-industries"><span class="header-section-number">3.2</span> Unemployment Rates of Differenet Industries</a></li>
  </ul></li>
  <li><a href="#pgm" id="toc-pgm" class="nav-link" data-scroll-target="#pgm"><span class="header-section-number">4</span> PGM</a>
  <ul class="collapse">
  <li><a href="#race-model---baseline-unemployment-rate-distribution" id="toc-race-model---baseline-unemployment-rate-distribution" class="nav-link" data-scroll-target="#race-model---baseline-unemployment-rate-distribution"><span class="header-section-number">4.1</span> Race model - Baseline unemployment rate distribution</a></li>
  <li><a href="#race-model---define-the-prior-means-for-overall-population" id="toc-race-model---define-the-prior-means-for-overall-population" class="nav-link" data-scroll-target="#race-model---define-the-prior-means-for-overall-population"><span class="header-section-number">4.2</span> Race model - Define the prior means for overall population</a></li>
  <li><a href="#race-model---define-the-prior-means-by-races" id="toc-race-model---define-the-prior-means-by-races" class="nav-link" data-scroll-target="#race-model---define-the-prior-means-by-races"><span class="header-section-number">4.3</span> Race model - Define the prior means by races</a></li>
  <li><a href="#race-model---train-test-split" id="toc-race-model---train-test-split" class="nav-link" data-scroll-target="#race-model---train-test-split"><span class="header-section-number">4.4</span> Race model - Train-test split</a></li>
  <li><a href="#race-model---define-the-pymc-model" id="toc-race-model---define-the-pymc-model" class="nav-link" data-scroll-target="#race-model---define-the-pymc-model"><span class="header-section-number">4.5</span> Race model - Define the PyMC model</a></li>
  <li><a href="#race-model---graph-pgm" id="toc-race-model---graph-pgm" class="nav-link" data-scroll-target="#race-model---graph-pgm"><span class="header-section-number">4.6</span> Race model - Graph PGM</a></li>
  <li><a href="#race-model---estimate-model-parameters" id="toc-race-model---estimate-model-parameters" class="nav-link" data-scroll-target="#race-model---estimate-model-parameters"><span class="header-section-number">4.7</span> Race model - Estimate model parameters</a></li>
  <li><a href="#race-model---extract-posterior-predictive-distribution-on-test-data" id="toc-race-model---extract-posterior-predictive-distribution-on-test-data" class="nav-link" data-scroll-target="#race-model---extract-posterior-predictive-distribution-on-test-data"><span class="header-section-number">4.8</span> Race model - Extract Posterior Predictive Distribution on Test data</a></li>
  <li><a href="#industry-model---define-priors" id="toc-industry-model---define-priors" class="nav-link" data-scroll-target="#industry-model---define-priors"><span class="header-section-number">4.9</span> Industry model - Define priors</a></li>
  <li><a href="#industry-model---train-test-split" id="toc-industry-model---train-test-split" class="nav-link" data-scroll-target="#industry-model---train-test-split"><span class="header-section-number">4.10</span> Industry model - Train-test split</a></li>
  <li><a href="#industry-model---define-the-adaptive-pooling-pymc-model" id="toc-industry-model---define-the-adaptive-pooling-pymc-model" class="nav-link" data-scroll-target="#industry-model---define-the-adaptive-pooling-pymc-model"><span class="header-section-number">4.11</span> Industry model - Define the Adaptive pooling PyMC model</a></li>
  <li><a href="#industry-model---visualize-pgm" id="toc-industry-model---visualize-pgm" class="nav-link" data-scroll-target="#industry-model---visualize-pgm"><span class="header-section-number">4.12</span> Industry model - Visualize PGM</a></li>
  <li><a href="#industry-model---estimate-model-parameters" id="toc-industry-model---estimate-model-parameters" class="nav-link" data-scroll-target="#industry-model---estimate-model-parameters"><span class="header-section-number">4.13</span> Industry model - Estimate model parameters</a></li>
  <li><a href="#industry-model---extract-posterior-predictive-distribution-on-test-data" id="toc-industry-model---extract-posterior-predictive-distribution-on-test-data" class="nav-link" data-scroll-target="#industry-model---extract-posterior-predictive-distribution-on-test-data"><span class="header-section-number">4.14</span> Industry model - Extract Posterior Predictive Distribution on Test data</a></li>
  <li><a href="#industry-model---extract-posterior-predictive-distribution-on-test-data-1" id="toc-industry-model---extract-posterior-predictive-distribution-on-test-data-1" class="nav-link" data-scroll-target="#industry-model---extract-posterior-predictive-distribution-on-test-data-1"><span class="header-section-number">4.15</span> Industry model - Extract Posterior Predictive Distribution on Test data</a></li>
  <li><a href="#industry-model---plot-predictive-vs.-unemployment-rate-in-the-test-data" id="toc-industry-model---plot-predictive-vs.-unemployment-rate-in-the-test-data" class="nav-link" data-scroll-target="#industry-model---plot-predictive-vs.-unemployment-rate-in-the-test-data"><span class="header-section-number">4.16</span> Industry model - Plot predictive vs.&nbsp;unemployment rate in the test data</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="index-preview.html"><i class="bi bi-journal-code"></i>Article Notebook</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>In its revised report released on July 31, 2025, the U.S. Bureau of Labor Statistics (BLS) reported a sharp slowdown in job creation beginning in May, signaling heightened uncertainty and growing concerns about the overall health of the U.S. labor market. The interplay of demographic characteristics and labor market dynamics consistently reveals significant disparities in unemployment rates. Decades of research reveal a persistent relationship between race, gender, and unemployment, evident across diverse economic cycles. Though the Black unemployment rate fell to a historic low of 6.1% in 2019, it was still twice as high as the White unemployment rate of 3.0%, as <span class="citation" data-cites="ValerieWilson2022">Wilson and Darity-Jr. (<a href="#ref-ValerieWilson2022" role="doc-biblioref">2022</a>)</span> observed. These disparities are further magnified at the intersection of race and gender. For instance, Black men faced a 6.1% unemployment rate in February 2024, notably higher than Black women at 4.4%. Similarly, Hispanic women’s unemployment rate increased to 5.0% in February 2024, while Hispanic men experienced a decrease to 4.0% (<span class="citation" data-cites="Joseph2024">Joseph Dean (<a href="#ref-Joseph2024" role="doc-biblioref">2024</a>)</span>). Industry-specific analyses similarly highlight divergent unemployment trends. The Leisure and Hospitality sector reported the highest unemployment rate at 6.0% in 2024, an increase from 5.5% in 2023. Similarly, Wholesale and Retail Trade experienced elevated unemployment, reaching 4.7% in October 2024, up from 4.0% in 2023. Conversely, Financial Activities maintained a significantly lower unemployment rate of 1.9% (<span class="citation" data-cites="Oberlo2024"><span>“US UNEMPLOYMENT RATE BY INDUSTRY (2024)”</span> (<a href="#ref-Oberlo2024" role="doc-biblioref">2024</a>)</span>).</p>
<p>Research from the U.S. Bureau of Labor Statistics consistently shows longer unemployment spells in sectors such as Manufacturing and Construction, while industries demanding specialized skills like Education and Health Services exhibit shorter durations. Study by <span class="citation" data-cites="YiLiChienandPaulMorris">YiLi Chien (<a href="#ref-YiLiChienandPaulMorris" role="doc-biblioref">2016</a>)</span> reveals negative correlation between the unemployment rate and duration. Such variations in both the rate and duration of unemployment underscore complex interactions among race, gender, age, and industry.</p>
<p><span class="citation" data-cites="TOIEducation2025">TOIEducation (<a href="#ref-TOIEducation2025" role="doc-biblioref">2025</a>)</span> published that the labor market for recent college graduates has “deteriorated noticeably” in the first quarter of 2025. The unemployment rate for this cohort (ages 22-27) ranged from 5.5% to 7.1%, exceeding the overall national average of 4.1-4.2%, with Anthropology (9.4%), Physics (7.8%), and Computer Engineering (7.5%) showing among the highest rates.</p>
<div id="fig-graduates" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graduates-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/unemployment_rate_recent_graduate.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figure&nbsp;1: Unemployment Rate of Recent College Graduates"><img src="images/unemployment_rate_recent_graduate.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graduates-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Unemployment Rate of Recent College Graduates
</figcaption>
</figure>
</div>
<p>Based on revised job reports for May through Jul 2025 released by the U.S. Bureau of Labor Statistics (BLS) on July 31, 2025, the new job creation numbers show a significant decline since May, raising substantial concerns regarding the stability of the U.S. labor market. Recent data clearly indicate a noticeable uptick in the unemployment rate for the 22-27 age group since March, reaching 2021 levels and particularly affecting recent college graduates (<a href="#fig-graduates" class="quarto-xref">Figure&nbsp;1</a>).</p>
<p>In this study, we are analyzing how race, gender, industry, age and the interactions of these features impact the disparities in the unemployment rate using BLS published historical labor force statistics and survey data.</p>
</section>
<section id="data" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="data"><span class="header-section-number">2</span> Data</h2>
<div class="cell" data-tbl-center="true" data-tbl-col="true" data-execution_count="2">
<div id="tbl-monthly-unemployment-rate-race" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-col="true" data-execution_count="2" data-tbl-center="true">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-monthly-unemployment-rate-race-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: BLS 2015-2025 Monthly Unemployment Rate By Race
</figcaption>
<div aria-describedby="tbl-monthly-unemployment-rate-race-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_970fa" class="do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_970fa_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Year</th>
<th id="T_970fa_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Month</th>
<th id="T_970fa_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">Unemployment_rate</th>
<th id="T_970fa_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Race</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_970fa_row0_col0" class="data row0 col0">2015</td>
<td id="T_970fa_row0_col1" class="data row0 col1">Jan</td>
<td id="T_970fa_row0_col2" class="data row0 col2">5.30</td>
<td id="T_970fa_row0_col3" class="data row0 col3">white</td>
</tr>
<tr class="even">
<td id="T_970fa_row1_col0" class="data row1 col0">2016</td>
<td id="T_970fa_row1_col1" class="data row1 col1">Jan</td>
<td id="T_970fa_row1_col2" class="data row1 col2">4.70</td>
<td id="T_970fa_row1_col3" class="data row1 col3">white</td>
</tr>
<tr class="odd">
<td id="T_970fa_row2_col0" class="data row2 col0">2017</td>
<td id="T_970fa_row2_col1" class="data row2 col1">Jan</td>
<td id="T_970fa_row2_col2" class="data row2 col2">4.70</td>
<td id="T_970fa_row2_col3" class="data row2 col3">white</td>
</tr>
<tr class="even">
<td id="T_970fa_row3_col0" class="data row3 col0">2018</td>
<td id="T_970fa_row3_col1" class="data row3 col1">Jan</td>
<td id="T_970fa_row3_col2" class="data row3 col2">3.90</td>
<td id="T_970fa_row3_col3" class="data row3 col3">white</td>
</tr>
<tr class="odd">
<td id="T_970fa_row4_col0" class="data row4 col0">2019</td>
<td id="T_970fa_row4_col1" class="data row4 col1">Jan</td>
<td id="T_970fa_row4_col2" class="data row4 col2">4.00</td>
<td id="T_970fa_row4_col3" class="data row4 col3">white</td>
</tr>
<tr class="even">
<td id="T_970fa_row5_col0" class="data row5 col0">2020</td>
<td id="T_970fa_row5_col1" class="data row5 col1">Jan</td>
<td id="T_970fa_row5_col2" class="data row5 col2">3.50</td>
<td id="T_970fa_row5_col3" class="data row5 col3">white</td>
</tr>
<tr class="odd">
<td id="T_970fa_row6_col0" class="data row6 col0">2021</td>
<td id="T_970fa_row6_col1" class="data row6 col1">Jan</td>
<td id="T_970fa_row6_col2" class="data row6 col2">6.20</td>
<td id="T_970fa_row6_col3" class="data row6 col3">white</td>
</tr>
<tr class="even">
<td id="T_970fa_row7_col0" class="data row7 col0">2022</td>
<td id="T_970fa_row7_col1" class="data row7 col1">Jan</td>
<td id="T_970fa_row7_col2" class="data row7 col2">3.90</td>
<td id="T_970fa_row7_col3" class="data row7 col3">white</td>
</tr>
<tr class="odd">
<td id="T_970fa_row8_col0" class="data row8 col0">2023</td>
<td id="T_970fa_row8_col1" class="data row8 col1">Jan</td>
<td id="T_970fa_row8_col2" class="data row8 col2">3.50</td>
<td id="T_970fa_row8_col3" class="data row8 col3">white</td>
</tr>
<tr class="even">
<td id="T_970fa_row9_col0" class="data row9 col0">2024</td>
<td id="T_970fa_row9_col1" class="data row9 col1">Jan</td>
<td id="T_970fa_row9_col2" class="data row9 col2">3.80</td>
<td id="T_970fa_row9_col3" class="data row9 col3">white</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
<a class="quarto-notebook-link" id="nblink-1" href="index-preview.html">Source: Article Notebook</a></div>
<p>Data from the U.S. Bureau of Labor Statistics (BLS) 2015 to 2025 monthly aggregated unemployment rate by races. This dataset is used to analyze the unemployment rate variations by race, which help define prior parameters for the predictions. (<a href="#tbl-monthly-unemployment-rate-race" class="quarto-xref">Table&nbsp;1</a>).</p>
<div class="cell" data-tbl-center="true" data-tbl-col="true" data-execution_count="4">
<div id="tbl-survey-data-jun-jul-2025" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-col="true" data-execution_count="4" data-tbl-center="true">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-survey-data-jun-jul-2025-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: BLS June 2025 Labor Force Survey Data
</figcaption>
<div aria-describedby="tbl-survey-data-jun-jul-2025-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_8f749" class="do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_8f749_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">sex_name</th>
<th id="T_8f749_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">race_name</th>
<th id="T_8f749_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">education_attainment_name</th>
<th id="T_8f749_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">employment_status_name</th>
<th id="T_8f749_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">industry_name</th>
<th id="T_8f749_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">is_black_african</th>
<th id="T_8f749_level0_col6" class="col_heading level0 col6" data-quarto-table-cell-role="th">is_asian</th>
<th id="T_8f749_level0_col7" class="col_heading level0 col7" data-quarto-table-cell-role="th">is_white</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_8f749_row0_col0" class="data row0 col0">male</td>
<td id="T_8f749_row0_col1" class="data row0 col1">white</td>
<td id="T_8f749_row0_col2" class="data row0 col2">bachelors_degree</td>
<td id="T_8f749_row0_col3" class="data row0 col3">employed</td>
<td id="T_8f749_row0_col4" class="data row0 col4">Construction</td>
<td id="T_8f749_row0_col5" class="data row0 col5">0</td>
<td id="T_8f749_row0_col6" class="data row0 col6">0</td>
<td id="T_8f749_row0_col7" class="data row0 col7">1</td>
</tr>
<tr class="even">
<td id="T_8f749_row1_col0" class="data row1 col0">male</td>
<td id="T_8f749_row1_col1" class="data row1 col1">white</td>
<td id="T_8f749_row1_col2" class="data row1 col2">high_school</td>
<td id="T_8f749_row1_col3" class="data row1 col3">employed</td>
<td id="T_8f749_row1_col4" class="data row1 col4">Construction</td>
<td id="T_8f749_row1_col5" class="data row1 col5">0</td>
<td id="T_8f749_row1_col6" class="data row1 col6">0</td>
<td id="T_8f749_row1_col7" class="data row1 col7">1</td>
</tr>
<tr class="odd">
<td id="T_8f749_row2_col0" class="data row2 col0">female</td>
<td id="T_8f749_row2_col1" class="data row2 col1">white</td>
<td id="T_8f749_row2_col2" class="data row2 col2">bachelors_degree</td>
<td id="T_8f749_row2_col3" class="data row2 col3">employed</td>
<td id="T_8f749_row2_col4" class="data row2 col4">Manufacturing</td>
<td id="T_8f749_row2_col5" class="data row2 col5">0</td>
<td id="T_8f749_row2_col6" class="data row2 col6">0</td>
<td id="T_8f749_row2_col7" class="data row2 col7">1</td>
</tr>
<tr class="even">
<td id="T_8f749_row3_col0" class="data row3 col0">male</td>
<td id="T_8f749_row3_col1" class="data row3 col1">white</td>
<td id="T_8f749_row3_col2" class="data row3 col2">bachelors_degree</td>
<td id="T_8f749_row3_col3" class="data row3 col3">employed</td>
<td id="T_8f749_row3_col4" class="data row3 col4">Manufacturing</td>
<td id="T_8f749_row3_col5" class="data row3 col5">0</td>
<td id="T_8f749_row3_col6" class="data row3 col6">0</td>
<td id="T_8f749_row3_col7" class="data row3 col7">1</td>
</tr>
<tr class="odd">
<td id="T_8f749_row4_col0" class="data row4 col0">female</td>
<td id="T_8f749_row4_col1" class="data row4 col1">white</td>
<td id="T_8f749_row4_col2" class="data row4 col2">masters_degree</td>
<td id="T_8f749_row4_col3" class="data row4 col3">employed</td>
<td id="T_8f749_row4_col4" class="data row4 col4">Transportation and utilities</td>
<td id="T_8f749_row4_col5" class="data row4 col5">0</td>
<td id="T_8f749_row4_col6" class="data row4 col6">0</td>
<td id="T_8f749_row4_col7" class="data row4 col7">1</td>
</tr>
<tr class="even">
<td id="T_8f749_row5_col0" class="data row5 col0">female</td>
<td id="T_8f749_row5_col1" class="data row5 col1">white</td>
<td id="T_8f749_row5_col2" class="data row5 col2">bachelors_degree</td>
<td id="T_8f749_row5_col3" class="data row5 col3">employed</td>
<td id="T_8f749_row5_col4" class="data row5 col4">Construction</td>
<td id="T_8f749_row5_col5" class="data row5 col5">0</td>
<td id="T_8f749_row5_col6" class="data row5 col6">0</td>
<td id="T_8f749_row5_col7" class="data row5 col7">1</td>
</tr>
<tr class="odd">
<td id="T_8f749_row6_col0" class="data row6 col0">male</td>
<td id="T_8f749_row6_col1" class="data row6 col1">white</td>
<td id="T_8f749_row6_col2" class="data row6 col2">high_school</td>
<td id="T_8f749_row6_col3" class="data row6 col3">employed</td>
<td id="T_8f749_row6_col4" class="data row6 col4">Wholesale and retail trade</td>
<td id="T_8f749_row6_col5" class="data row6 col5">0</td>
<td id="T_8f749_row6_col6" class="data row6 col6">0</td>
<td id="T_8f749_row6_col7" class="data row6 col7">1</td>
</tr>
<tr class="even">
<td id="T_8f749_row7_col0" class="data row7 col0">female</td>
<td id="T_8f749_row7_col1" class="data row7 col1">white</td>
<td id="T_8f749_row7_col2" class="data row7 col2">bachelors_degree</td>
<td id="T_8f749_row7_col3" class="data row7 col3">employed</td>
<td id="T_8f749_row7_col4" class="data row7 col4">Professional and business services</td>
<td id="T_8f749_row7_col5" class="data row7 col5">0</td>
<td id="T_8f749_row7_col6" class="data row7 col6">0</td>
<td id="T_8f749_row7_col7" class="data row7 col7">1</td>
</tr>
<tr class="odd">
<td id="T_8f749_row8_col0" class="data row8 col0">male</td>
<td id="T_8f749_row8_col1" class="data row8 col1">white</td>
<td id="T_8f749_row8_col2" class="data row8 col2">less_than_high_school</td>
<td id="T_8f749_row8_col3" class="data row8 col3">employed</td>
<td id="T_8f749_row8_col4" class="data row8 col4">Professional and business services</td>
<td id="T_8f749_row8_col5" class="data row8 col5">0</td>
<td id="T_8f749_row8_col6" class="data row8 col6">0</td>
<td id="T_8f749_row8_col7" class="data row8 col7">1</td>
</tr>
<tr class="even">
<td id="T_8f749_row9_col0" class="data row9 col0">female</td>
<td id="T_8f749_row9_col1" class="data row9 col1">white</td>
<td id="T_8f749_row9_col2" class="data row9 col2">high_school</td>
<td id="T_8f749_row9_col3" class="data row9 col3">employed</td>
<td id="T_8f749_row9_col4" class="data row9 col4">Educational and health services</td>
<td id="T_8f749_row9_col5" class="data row9 col5">0</td>
<td id="T_8f749_row9_col6" class="data row9 col6">0</td>
<td id="T_8f749_row9_col7" class="data row9 col7">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>We are using June and July 2025 data - the labor force survey result that provides individual-level employment status and corresponding demographic information. For the purpose of this study, a subset of these relevant columns is utilized (<a href="#tbl-survey-data-jun-jul-2025" class="quarto-xref">Table&nbsp;2</a>). This dataset is used to sample and predict employment status using the observations in the data.</p>
<div class="cell" data-tbl-center="true" data-tbl-col="true" data-execution_count="5">
<div id="tbl-survey-data-2024-2025" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-col="true" data-execution_count="5" data-tbl-center="true">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-survey-data-2024-2025-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: BLS 2024 - 2025 Jan - Jul Labor Force Survey Data
</figcaption>
<div aria-describedby="tbl-survey-data-2024-2025-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_95b5f" class="do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_95b5f_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">industry</th>
<th id="T_95b5f_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">employment_status</th>
<th id="T_95b5f_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">month_year</th>
<th id="T_95b5f_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">industry_name</th>
<th id="T_95b5f_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">employment_status_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_95b5f_row0_col0" class="data row0 col0">11</td>
<td id="T_95b5f_row0_col1" class="data row0 col1">1</td>
<td id="T_95b5f_row0_col2" class="data row0 col2">jan_2024</td>
<td id="T_95b5f_row0_col3" class="data row0 col3">Leisure and hospitality</td>
<td id="T_95b5f_row0_col4" class="data row0 col4">employed</td>
</tr>
<tr class="even">
<td id="T_95b5f_row1_col0" class="data row1 col0">11</td>
<td id="T_95b5f_row1_col1" class="data row1 col1">1</td>
<td id="T_95b5f_row1_col2" class="data row1 col2">jan_2024</td>
<td id="T_95b5f_row1_col3" class="data row1 col3">Leisure and hospitality</td>
<td id="T_95b5f_row1_col4" class="data row1 col4">employed</td>
</tr>
<tr class="odd">
<td id="T_95b5f_row2_col0" class="data row2 col0">10</td>
<td id="T_95b5f_row2_col1" class="data row2 col1">1</td>
<td id="T_95b5f_row2_col2" class="data row2 col2">jan_2024</td>
<td id="T_95b5f_row2_col3" class="data row2 col3">Educational and health services</td>
<td id="T_95b5f_row2_col4" class="data row2 col4">employed</td>
</tr>
<tr class="even">
<td id="T_95b5f_row3_col0" class="data row3 col0">5</td>
<td id="T_95b5f_row3_col1" class="data row3 col1">1</td>
<td id="T_95b5f_row3_col2" class="data row3 col2">jan_2024</td>
<td id="T_95b5f_row3_col3" class="data row3 col3">Wholesale and retail trade</td>
<td id="T_95b5f_row3_col4" class="data row3 col4">employed</td>
</tr>
<tr class="odd">
<td id="T_95b5f_row4_col0" class="data row4 col0">4</td>
<td id="T_95b5f_row4_col1" class="data row4 col1">4</td>
<td id="T_95b5f_row4_col2" class="data row4 col2">jan_2024</td>
<td id="T_95b5f_row4_col3" class="data row4 col3">Manufacturing</td>
<td id="T_95b5f_row4_col4" class="data row4 col4">unemployed</td>
</tr>
<tr class="even">
<td id="T_95b5f_row5_col0" class="data row5 col0">8</td>
<td id="T_95b5f_row5_col1" class="data row5 col1">1</td>
<td id="T_95b5f_row5_col2" class="data row5 col2">jan_2024</td>
<td id="T_95b5f_row5_col3" class="data row5 col3">Financial activities</td>
<td id="T_95b5f_row5_col4" class="data row5 col4">employed</td>
</tr>
<tr class="odd">
<td id="T_95b5f_row6_col0" class="data row6 col0">9</td>
<td id="T_95b5f_row6_col1" class="data row6 col1">1</td>
<td id="T_95b5f_row6_col2" class="data row6 col2">jan_2024</td>
<td id="T_95b5f_row6_col3" class="data row6 col3">Professional and business services</td>
<td id="T_95b5f_row6_col4" class="data row6 col4">employed</td>
</tr>
<tr class="even">
<td id="T_95b5f_row7_col0" class="data row7 col0">5</td>
<td id="T_95b5f_row7_col1" class="data row7 col1">1</td>
<td id="T_95b5f_row7_col2" class="data row7 col2">jan_2024</td>
<td id="T_95b5f_row7_col3" class="data row7 col3">Wholesale and retail trade</td>
<td id="T_95b5f_row7_col4" class="data row7 col4">employed</td>
</tr>
<tr class="odd">
<td id="T_95b5f_row8_col0" class="data row8 col0">4</td>
<td id="T_95b5f_row8_col1" class="data row8 col1">1</td>
<td id="T_95b5f_row8_col2" class="data row8 col2">jan_2024</td>
<td id="T_95b5f_row8_col3" class="data row8 col3">Manufacturing</td>
<td id="T_95b5f_row8_col4" class="data row8 col4">employed</td>
</tr>
<tr class="even">
<td id="T_95b5f_row9_col0" class="data row9 col0">4</td>
<td id="T_95b5f_row9_col1" class="data row9 col1">1</td>
<td id="T_95b5f_row9_col2" class="data row9 col2">jan_2024</td>
<td id="T_95b5f_row9_col3" class="data row9 col3">Manufacturing</td>
<td id="T_95b5f_row9_col4" class="data row9 col4">employed</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Data from the U.S. Bureau of Labor Statistics (BLS) historical monthly labor force survey provide individual-level employment status by industries. For the purpose of this study, we utilized 2024 Jan to Jul and 2025 Jan to Jun data. (<a href="#tbl-survey-data-2024-2025" class="quarto-xref">Table&nbsp;3</a>). This dataset is used to analyze the industry effect on unemployment rate in the recent 2 years.</p>
</section>
<section id="eda" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="eda"><span class="header-section-number">3</span> EDA</h2>
<section id="unemployment-rates-of-differenet-races" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="unemployment-rates-of-differenet-races"><span class="header-section-number">3.1</span> Unemployment Rates of Differenet Races</h3>
<div id="8eef7201" class="cell" data-execution_count="6">
<div class="cell-output cell-output-stdout">
<pre><code>Unemployment Rate Distribution Histograms By Race</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/cell-7-output-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="index_files/figure-html/cell-7-output-2.png" width="1526" height="494" class="figure-img"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Unemployment Rate Distribution Histograms By Sex</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/cell-7-output-4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="index_files/figure-html/cell-7-output-4.png" width="1525" height="494" class="figure-img"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Unemployment Rate Distribution Histograms By Industry</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/cell-7-output-6.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="index_files/figure-html/cell-7-output-6.png" width="1526" height="2453" class="figure-img"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Unemployment Rate Distribution Histograms By Age</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/cell-7-output-8.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="index_files/figure-html/cell-7-output-8.png" width="1526" height="984" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<div id="cell-fig-histogram-unemployment-rate-demographics" class="cell" data-execution_count="7">
<div class="cell-output cell-output-stdout">
<pre><code>Unemployment Rate Distribution Histograms By Education_attainment</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-histogram-unemployment-rate-demographics" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Histogram plots of the unemployment rate distributins by Age, Sex, Race, Industry and Education Attainment using 2015-2025 BLS data">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histogram-unemployment-rate-demographics-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-histogram-unemployment-rate-demographics-output-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Figure&nbsp;2: Unemployment Rate Distributions By Demographics (2015-2025 statistics)"><img src="index_files/figure-html/fig-histogram-unemployment-rate-demographics-output-2.png" alt="Histogram plots of the unemployment rate distributins by Age, Sex, Race, Industry and Education Attainment using 2015-2025 BLS data" width="1526" height="984" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-unemployment-rate-demographics-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Unemployment Rate Distributions By Demographics (2015-2025 statistics)
</figcaption>
</figure>
</div>
</div>
</div>
<p>BLS data from 2015–2025 indicate that the Black or African American population experienced the highest average unemployment rate (7.5%), primarily within the 5–10% range. Gender differences are minimal, with both averaging around 5%, though rates are slightly higher for men. Among industries, Leisure and Hospitality recorded the highest unemployment (10%) with a long-tail distribution, followed by Agriculture (5–11%) and moderate variability. Construction and Mining/Oil &amp; Gas exhibit similar but marginally lower patterns. The 22–24 age group stands out with significantly elevated unemployment—averaging 7% and predominantly above 5%—while other age groups display lower and more uniform rates. Financial Activities show the lowest and most stable unemployment, consistently under 5%. Individuals without a high school diploma face high and variable unemployment, averaging 7% with a long-tail skew. These patterns suggest that young adults (22–24), Black or African Americans without college degrees, and those employed in Leisure, Construction, or Mining sectors are disproportionately affected by higher unemployment. (<a href="#fig-histogram-unemployment-rate-demographics" class="quarto-xref">Figure&nbsp;2</a>).</p>
<div id="cell-fig-histogram-unemployment-rate" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<div id="fig-histogram-unemployment-rate" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Histogram plot of the overall population unemployment rate distributions using 2015-2025 BLS data">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histogram-unemployment-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-histogram-unemployment-rate-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="Figure&nbsp;3: Overall Population Unemployment Rate Distributions (2015-2025 statistics)"><img src="index_files/figure-html/fig-histogram-unemployment-rate-output-1.png" alt="Histogram plot of the overall population unemployment rate distributions using 2015-2025 BLS data" width="758" height="690" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-unemployment-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Overall Population Unemployment Rate Distributions (2015-2025 statistics)
</figcaption>
</figure>
</div>
</div>
</div>
<p>According to BLS data from 2015–2025, the overall population unemployment rate averaged slightly above 4%, with the majority of observations concentrated between 2% and 5% and exhibiting relatively low variability (<a href="#fig-histogram-unemployment-rate" class="quarto-xref">Figure&nbsp;3</a>).</p>
</section>
<section id="unemployment-rates-of-differenet-industries" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="unemployment-rates-of-differenet-industries"><span class="header-section-number">3.2</span> Unemployment Rates of Differenet Industries</h3>
<div id="cell-fig-boxplot-unemployment-rate-industry" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display">
<div id="fig-boxplot-unemployment-rate-industry" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Boxplot of the industry unemployment rates distributions using 2015-2025 BLS data">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxplot-unemployment-rate-industry-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-boxplot-unemployment-rate-industry-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="Figure&nbsp;4: Unemployment Rate Distributions By Industries (2015-2025 statistics)"><img src="index_files/figure-html/fig-boxplot-unemployment-rate-industry-output-1.png" alt="Boxplot of the industry unemployment rates distributions using 2015-2025 BLS data" width="1108" height="1232" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxplot-unemployment-rate-industry-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Unemployment Rate Distributions By Industries (2015-2025 statistics)
</figcaption>
</figure>
</div>
</div>
</div>
<p>The boxplot illustrates notable variation in unemployment rates across industries. “Agricultural, mining/oil/gas extraction” and “Construction” industries exhibit the highest variation and upper extremes, indicating greater instability in employment. Due to the volatility and unpredictivity as a result of seasonlity, these two categories are going to be excluded from our analysis. In contrast, “Government”, “Financial services”, and “Education/health services” show consistently low and stable unemployment rates, with narrower interquartile ranges and fewer outliers. These patterns suggest structural differences in labor market vulnerability across sectors. (<a href="#fig-boxplot-unemployment-rate-industry" class="quarto-xref">Figure&nbsp;4</a>).</p>
</section>
</section>
<section id="pgm" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="pgm"><span class="header-section-number">4</span> PGM</h2>
<p>We posit that unemployment vulnerability is driven by structural inequalities within the labor market, particularly those rooted in demographic and industrial dimensions. Demographic disparities are represented by variables such as race, age, and educational attainment and industry; sex is excluded from the analysis due to prior findings indicating minimal impact on unemployment rates. Establishing a baseline unemployment level is a necessary step before assessing the marginal effects of these demographic and industrial factors.</p>
<section id="race-model---baseline-unemployment-rate-distribution" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="race-model---baseline-unemployment-rate-distribution"><span class="header-section-number">4.1</span> Race model - Baseline unemployment rate distribution</h3>
<p>Figure 3 illustrates that the population unemployment rate is right-skewed, suggesting that the Log-Normal distribution is an appropriate model. We are going to estimate the parameters of a Log-Normal distribution from the population distribution data using MLE. (<span class="math inline">\(\sigma\)</span>, <span class="math inline">\(\text{loc}\)</span>, and <span class="math inline">\(\text{scale}\)</span>).</p>
<div id="cell-fig-histogram-lognorm" class="cell" data-execution_count="10">
<div class="cell-output cell-output-stdout">
<pre><code>
Fitted Log-Norm Distribution Parameters:
  Shape parameter 'alpha'): 9.92
  Location parameter (loc): 3.20
  Scale parameter (scale): 0.03</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-histogram-lognorm" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Plot the histogram of unemployment rate data and overlay the Probability Density Function (PDF) of the fitted log-norm distribution.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histogram-lognorm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-histogram-lognorm-output-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9" title="Figure&nbsp;5: Unmployment Rate Histogram vs.&nbsp;Fitted Log-Norm PDF"><img src="index_files/figure-html/fig-histogram-lognorm-output-2.png" alt="Plot the histogram of unemployment rate data and overlay the Probability Density Function (PDF) of the fitted log-norm distribution." width="950" height="886" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-lognorm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Unmployment Rate Histogram vs.&nbsp;Fitted Log-Norm PDF
</figcaption>
</figure>
</div>
</div>
</div>
<p>By overlaying the smooth PDF curve on top of original data’s histogram, we can visualize that the Log-Normal distribution matches the distribution of the actual data. The peak of the PDF align with the peak of the histogram. The spread of the PDF roughly match the spread of the data, including the tail (<a href="#fig-histogram-lognorm" class="quarto-xref">Figure&nbsp;5</a>). Now we need to use Kolmogorov-Smirnov Test to test Goodness-of-fit with the original data and estimated parameters, then examine the p value.</p>
<div id="fca7e402" class="cell" data-execution_count="11">
<div class="cell-output cell-output-stdout">
<pre><code>
Kolmogorov-Smirnov Test Results:
  D-statistic: 0.4592
  P-value: 0.0000</code></pre>
</div>
</div>
<p>With <span class="math inline">\(p\)</span>-value &lt; 0.05, we can’t reject the hypothesis that the distribution does not come from the Log-Normal distribution, suggesting Log-Normal is not a good fit for the data. Next, explore other right-skewed distributions - Gamma distribution or the Weibull distribution.</p>
<div id="cell-fig-histogram-gamma" class="cell" data-execution_count="12">
<div class="cell-output cell-output-stdout">
<pre><code>
Fitted Gamma Distribution Parameters:
  Shape parameter 'alpha': 0.45
  Location parameter 'loc': 3.20
  Scale parameter 'scale'): 1.36</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-histogram-gamma" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Plot the histogram of unemployment rate data and overlay the Probability Density Function (PDF) of the fitted Gamma distribution.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histogram-gamma-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-histogram-gamma-output-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" title="Figure&nbsp;6: Unmployment Rate Histogram vs.&nbsp;Fitted Gamma PDF"><img src="index_files/figure-html/fig-histogram-gamma-output-2.png" alt="Plot the histogram of unemployment rate data and overlay the Probability Density Function (PDF) of the fitted Gamma distribution." width="950" height="788" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-gamma-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Unmployment Rate Histogram vs.&nbsp;Fitted Gamma PDF
</figcaption>
</figure>
</div>
</div>
</div>
<p>Although visually the Gamma distribution matches the shape and spread of the actual data. (<a href="#fig-histogram-gamma" class="quarto-xref">Figure&nbsp;6</a>), we need to use KS Test to test Goodness-of-fit by examining the p value.</p>
<div id="9666c480" class="cell" data-execution_count="13">
<div class="cell-output cell-output-stdout">
<pre><code>
Kolmogorov-Smirnov Test Results:
  D-statistic: 0.2699
  P-value: 0.0000</code></pre>
</div>
</div>
<p>Again, with <span class="math inline">\(p\)</span>-value &lt; 0.05, we can not confidently say that the data comes from the Gamma distribution. Next, explore Weibull distribution.</p>
<div id="cell-fig-histogram-weibull" class="cell" data-execution_count="14">
<div class="cell-output cell-output-display">
<div id="fig-histogram-weibull" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Plot the histogram of unemployment rate data and overlay the Probability Density Function (PDF) of the fitted Weibull distribution.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histogram-weibull-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-histogram-weibull-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11" title="Figure&nbsp;7: Unmployment Rate Histogram vs.&nbsp;Fitted Weibull PDF"><img src="index_files/figure-html/fig-histogram-weibull-output-1.png" alt="Plot the histogram of unemployment rate data and overlay the Probability Density Function (PDF) of the fitted Weibull distribution." width="950" height="788" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-weibull-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Unmployment Rate Histogram vs.&nbsp;Fitted Weibull PDF
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-tbl-center="true" data-tbl-col="true" data-execution_count="16">
<div id="tbl-weibull-params" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-col="true" data-execution_count="16" data-tbl-center="true">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-weibull-params-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Weibull Distribution and Fitness Statistics
</figcaption>
<div aria-describedby="tbl-weibull-params-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_04d54" class="do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_04d54_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Parameters</th>
<th id="T_04d54_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_04d54_row0_col0" class="data row0 col0">Shape (c)</td>
<td id="T_04d54_row0_col1" class="data row0 col1">0.709300</td>
</tr>
<tr class="even">
<td id="T_04d54_row1_col0" class="data row1 col0">Location (loc)</td>
<td id="T_04d54_row1_col1" class="data row1 col1">3.200000</td>
</tr>
<tr class="odd">
<td id="T_04d54_row2_col0" class="data row2 col0">Scale</td>
<td id="T_04d54_row2_col1" class="data row2 col1">0.920400</td>
</tr>
<tr class="even">
<td id="T_04d54_row3_col0" class="data row3 col0">D_statistics</td>
<td id="T_04d54_row3_col1" class="data row3 col1">0.104700</td>
</tr>
<tr class="odd">
<td id="T_04d54_row4_col0" class="data row4 col0">P-value</td>
<td id="T_04d54_row4_col1" class="data row4 col1">0.117300</td>
</tr>
<tr class="even">
<td id="T_04d54_row5_col0" class="data row5 col0">Fitted Mean</td>
<td id="T_04d54_row5_col1" class="data row5 col1">4.350000</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The overlayed smooth PDF curve on top of original data’s histogram <a href="#fig-histogram-weibull" class="quarto-xref">Figure&nbsp;7</a> suggests that the Weibull distribution matches the distribution of the actual data. The results of the Weibull distribution, summarized in Table <a href="#tbl-weibull-params" class="quarto-xref">Table&nbsp;4</a>, including the shape, location, and scale parameters, along with the D-statistic, P-value, and fitted mean also proves Weibull distribution is a good fit, supported by a KS test p-value of 0.1173 (greater than 0.05). The estimated parameters (c=0.7093, loc=3.2000, scale=0.9204) align well with the spread of the data. Shape (c&lt;1): Confirms the strong right-skewness of the data. Location (loc=3.2000): Indicates the distribution starts around 3.20, matching data’s lower bound. Inferred Mean: The calculated mean of approximately 4.35 from these parameters is close but slightly higher than the data’s actual mean of around 4, showing a good capture of central tendency.</p>
</section>
<section id="race-model---define-the-prior-means-for-overall-population" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="race-model---define-the-prior-means-for-overall-population"><span class="header-section-number">4.2</span> Race model - Define the prior means for overall population</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">### population unemployment mean probability from the fitted Weibull distribution</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>weibull_fitted_mean_prob <span class="op">=</span> <span class="fl">0.0435</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the fitted mean probability to its log-odds equivalent in order to model binary outcome with logistic regression</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>population_mean_log_odds <span class="op">=</span> np.log(weibull_fitted_mean_prob <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> weibull_fitted_mean_prob))</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"population mean log-odds: </span><span class="sc">{</span>population_mean_log_odds<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="6b60b263" class="cell" data-execution_count="17">
<div class="cell-output cell-output-stdout">
<pre><code>population mean log-odds: -3.0905</code></pre>
</div>
</div>
</section>
<section id="race-model---define-the-prior-means-by-races" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="race-model---define-the-prior-means-by-races"><span class="header-section-number">4.3</span> Race model - Define the prior means by races</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to find the means of different demographics</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mean_prob_demographic(df_name, demographic_type, demographic_description):</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    demographic_mean_prob <span class="op">=</span> df_dic[df_name].loc[df_dic[df_name][demographic_type]<span class="op">==</span>demographic_description][<span class="st">'Unemployment_rate'</span>].mean()<span class="op">/</span><span class="dv">100</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    demographic_mean_log_odds <span class="op">=</span> np.log(demographic_mean_prob <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> demographic_mean_prob))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># beta_effect is the difference between the demographic group mean log-odds and the population mean log-odds</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    beta_effect <span class="op">=</span> demographic_mean_log_odds <span class="op">-</span> population_mean_log_odds</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> beta_effect</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a grid of demographic information to return the means</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>demographic_grid <span class="op">=</span> pd.DataFrame({</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"df_name"</span>:[</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Race'</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Race'</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Race'</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"demographic_type"</span>:[</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Race"</span>, </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Race"</span>,</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Race"</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"demographic_description"</span>:[</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">'black_and_african'</span>,</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">'white'</span>,</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">'asian'</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the beta_effect of different demographics</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>demographic_grid[<span class="st">'beta_effect'</span>]<span class="op">=</span> np.float64(<span class="dv">0</span>)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(demographic_grid)):</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mean of demographic groups</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>    beta_effect <span class="op">=</span> mean_prob_demographic(demographic_grid[<span class="st">'df_name'</span>][row], demographic_grid[<span class="st">'demographic_type'</span>][row], demographic_grid[<span class="st">'demographic_description'</span>][row])</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    demographic_grid[<span class="st">'beta_effect'</span>][row] <span class="op">=</span> beta_effect</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>display(demographic_grid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="7281f025" class="cell" data-execution_count="18">
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">df_name</th>
<th data-quarto-table-cell-role="th">demographic_type</th>
<th data-quarto-table-cell-role="th">demographic_description</th>
<th data-quarto-table-cell-role="th">beta_effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Race</td>
<td>Race</td>
<td>black_and_african</td>
<td>0.579129</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Race</td>
<td>Race</td>
<td>white</td>
<td>-0.051353</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Race</td>
<td>Race</td>
<td>asian</td>
<td>-0.105245</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The corresponding beta_effect for each of three races are shown in table above. These beta parameters are additive race effect parameter on population mean.</p>
</section>
<section id="race-model---train-test-split" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="race-model---train-test-split"><span class="header-section-number">4.4</span> Race model - Train-test split</h3>
<p>Before PyMC - Split survey data to train and test datasets in order to test the performance of the models</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>train_df_survey, test_df_survey <span class="op">=</span> train_test_split(df_survey_jun_jul, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="race-model---define-the-pymc-model" class="level3" data-number="4.5">
<h3 data-number="4.5" class="anchored" data-anchor-id="race-model---define-the-pymc-model"><span class="header-section-number">4.5</span> Race model - Define the PyMC model</h3>
<p>This section sets up the Bayesian model to estimate the additive race effect relative to the fixed baseline.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the pymc model</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pymc <span class="im">as</span> pm</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arviz <span class="im">as</span> az</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>X_train <span class="op">=</span> train_df_survey[[<span class="st">'is_black_african'</span>,<span class="st">'is_asian'</span>, <span class="st">'is_white'</span>]]</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> train_df_survey[<span class="st">'unemployment_status'</span>]</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>X_test <span class="op">=</span> test_df_survey[[<span class="st">'is_black_african'</span>,<span class="st">'is_asian'</span>, <span class="st">'is_white'</span>]]</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> test_df_survey[<span class="st">'unemployment_status'</span>]</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>train_coords <span class="op">=</span> {</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'response_id'</span>: X_train.index.values</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pm.Model(coords<span class="op">=</span>train_coords) <span class="im">as</span> unemployment_race_model:</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Prior of population mean log odds</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    mu_population_log_odds <span class="op">=</span> pm.Normal(<span class="st">'mu_population_log_odds'</span>, mu<span class="op">=</span>population_mean_log_odds, sigma<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Additive race effect parameter on population mean</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    beta_black <span class="op">=</span> pm.Normal(<span class="st">'beta_black'</span>, mu<span class="op">=</span>demographic_grid[demographic_grid[<span class="st">'demographic_description'</span>]<span class="op">==</span><span class="st">'black_and_african'</span>][<span class="st">'beta_effect'</span>], sigma<span class="op">=</span><span class="fl">0.3</span>) <span class="co"># Can be positive or negative</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    beta_asian <span class="op">=</span> pm.Normal(<span class="st">'beta_asian'</span>, mu<span class="op">=</span>demographic_grid[demographic_grid[<span class="st">'demographic_description'</span>]<span class="op">==</span><span class="st">'asian'</span>][<span class="st">'beta_effect'</span>], sigma<span class="op">=</span><span class="fl">0.3</span>) </span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    beta_white <span class="op">=</span> pm.Normal(<span class="st">'beta_white'</span>, mu<span class="op">=</span>demographic_grid[demographic_grid[<span class="st">'demographic_description'</span>]<span class="op">==</span><span class="st">'white'</span>][<span class="st">'beta_effect'</span>], sigma<span class="op">=</span><span class="fl">0.3</span>) </span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    black_obs <span class="op">=</span> pm.Data(<span class="st">"black_obs"</span>, X_train[<span class="st">'is_black_african'</span>], dims<span class="op">=</span><span class="st">"response_id"</span>)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    white_obs <span class="op">=</span> pm.Data(<span class="st">"white_obs"</span>, X_train[<span class="st">'is_white'</span>], dims<span class="op">=</span><span class="st">"response_id"</span>)</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    asian_obs <span class="op">=</span> pm.Data(<span class="st">"asian_obs"</span>, X_train[<span class="st">'is_asian'</span>], dims<span class="op">=</span><span class="st">"response_id"</span>)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    p_unemployment <span class="op">=</span> pm.Deterministic(<span class="st">"p_unemployment"</span>, pm.math.invlogit(mu_population_log_odds <span class="op">+</span> beta_black <span class="op">*</span> black_obs <span class="op">+</span> beta_white <span class="op">*</span> white_obs <span class="op">+</span> beta_asian <span class="op">*</span> asian_obs), dims <span class="op">=</span> <span class="st">'response_id'</span>)</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    unemployment_obs <span class="op">=</span> pm.Data(<span class="st">"unemployment_obs"</span>, y_train, dims<span class="op">=</span><span class="st">"response_id"</span>)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    unemployment <span class="op">=</span> pm.Bernoulli(<span class="st">"unemployment"</span>, p <span class="op">=</span> p_unemployment, observed<span class="op">=</span>unemployment_obs, dims<span class="op">=</span><span class="st">"response_id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="race-model---graph-pgm" class="level3" data-number="4.6">
<h3 data-number="4.6" class="anchored" data-anchor-id="race-model---graph-pgm"><span class="header-section-number">4.6</span> Race model - Graph PGM</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>pm.model_to_graphviz(unemployment_race_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="88e7c11e" class="cell" data-execution_count="21">
<div class="cell-output cell-output-display" data-execution_count="21">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/cell-22-output-1.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="index_files/figure-html/cell-22-output-1.svg" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="race-model---estimate-model-parameters" class="level3" data-number="4.7">
<h3 data-number="4.7" class="anchored" data-anchor-id="race-model---estimate-model-parameters"><span class="header-section-number">4.7</span> Race model - Estimate model parameters</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Starting Race Model Sampling..."</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> unemployment_race_model:</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    race_idata <span class="op">=</span> pm.sample(tune <span class="op">=</span><span class="dv">500</span>, draw <span class="op">=</span> <span class="dv">500</span>, random_seed<span class="op">=</span><span class="dv">5650</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="646d3b3f" class="cell" data-execution_count="22">
<div class="cell-output cell-output-stdout">
<pre><code>Starting Race Model Sampling...</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"687e387871314529b9fa0b972d362892","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
</section>
<section id="race-model---extract-posterior-predictive-distribution-on-test-data" class="level3" data-number="4.8">
<h3 data-number="4.8" class="anchored" data-anchor-id="race-model---extract-posterior-predictive-distribution-on-test-data"><span class="header-section-number">4.8</span> Race model - Extract Posterior Predictive Distribution on Test data</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update to test data</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>test_coords <span class="op">=</span> {</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'response_id'</span>: X_test.index.values</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> unemployment_race_model:</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    pm.set_data({<span class="st">"unemployment_obs"</span>: y_test,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"black_obs"</span>: X_test[<span class="st">'is_black_african'</span>],</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"white_obs"</span>: X_test[<span class="st">'is_white'</span>],</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"asian_obs"</span>: X_test[<span class="st">'is_asian'</span>]}, coords<span class="op">=</span>test_coords)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> unemployment_race_model:</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    race_idata <span class="op">=</span> pm.sample_posterior_predictive(race_idata, random_seed<span class="op">=</span><span class="dv">5650</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="aa4f2068" class="cell" data-execution_count="23">
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"c14ff6ccad7040a1bc891596c06fa52d","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract means of unemployment values from the posterior predictive distribution given test data</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>race_test_meanunemployment <span class="op">=</span> race_test_idata.posterior_predictive[<span class="st">'unemployment'</span>].mean(dim<span class="op">=</span>[<span class="st">'chain'</span>,<span class="st">'draw'</span>])</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(race_test_meanunemployment.values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="52de70fb" class="cell" data-execution_count="24">
<div class="cell-output cell-output-stdout">
<pre><code>[0.0365  0.03225 0.03225 ... 0.0275  0.036   0.027  ]</code></pre>
</div>
</div>
</section>
<section id="industry-model---define-priors" class="level3" data-number="4.9">
<h3 data-number="4.9" class="anchored" data-anchor-id="industry-model---define-priors"><span class="header-section-number">4.9</span> Industry model - Define priors</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">## 1. Exclude some industries and persons "not in labor force" and industries that don't have historical unemployment stats</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>survey_df_industry <span class="op">=</span> survey_df[<span class="op">~</span>survey_df[<span class="st">'industry_name'</span>].isin([<span class="st">'Construction'</span>,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'Mining'</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'Other services'</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'Agriculture, forestry, fishing, and hunting'</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'Armed Forces'</span>])]</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>survey_df_industry <span class="op">=</span> survey_df_industry[survey_df_industry[<span class="st">'employment_status_description'</span>]<span class="op">!=</span><span class="st">"not in labor force"</span>]</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">## Factorize the industry_name column to get numerical indices and names</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>industry_idx, industry_names <span class="op">=</span> survey_df_industry[<span class="st">'industry_name'</span>].factorize()</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>survey_df_industry[<span class="st">'industry_idx'</span>] <span class="op">=</span> industry_idx</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">## Map EmploymentStatus to numerical (0 for Employed, 1 for Unemployed)</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>survey_df_industry[<span class="st">'unemployment_status'</span>] <span class="op">=</span> survey_df_industry[<span class="st">'employment_status_description'</span>].<span class="bu">map</span>({<span class="st">'employed'</span>: <span class="dv">0</span>, <span class="st">'unemployed'</span>: <span class="dv">1</span>})</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co">## 2. Get the prior means and sds of unemployment rates by industries from the historical monthly statistics (exlcuding 2020-2021)</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>df_industry_monthly_ur <span class="op">=</span> df_industry[<span class="op">~</span>df_industry[<span class="st">'Industry'</span>].isin([<span class="st">'construction'</span>,</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'mining_quarrying_and_oil_and_gas_ extraction'</span>,</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'other_services'</span>,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'agricultural'</span>,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'self_employed'</span>,</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'non_durable_goods'</span>,</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'durable_goods'</span>])]</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>ur_by_industry <span class="op">=</span> pd.DataFrame(df_industry_monthly_ur.groupby(<span class="st">'Industry'</span>, as_index<span class="op">=</span><span class="va">False</span>).agg(</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    mean_ur <span class="op">=</span> (<span class="st">'Unemployment_rate'</span>,<span class="st">'mean'</span>),</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    sd_ur <span class="op">=</span> (<span class="st">'Unemployment_rate'</span>, <span class="st">'std'</span>)</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a> <span class="co"># modify the industry name column to align with industry_names</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>ur_by_industry[<span class="st">'Industry'</span>]<span class="op">=</span>[<span class="st">'Educational and health services'</span>,</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Financial activities'</span>,</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Public administration'</span>,</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Information'</span>,</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Leisure and hospitality'</span>,</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Manufacturing'</span>,</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Professional and business services'</span>,</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Transportation and utilities'</span>,</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Wholesale and retail trade'</span>]</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Logit transformation function</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> logit(p):</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.log(p <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> p))</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>ur_by_industry[<span class="st">'mean_ur_logit'</span>] <span class="op">=</span> logit(ur_by_industry[<span class="st">'mean_ur'</span>]<span class="op">/</span><span class="dv">100</span>)</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>ur_by_industry[<span class="st">'sd_ur_logit'</span>] <span class="op">=</span> logit(ur_by_industry[<span class="st">'sd_ur'</span>]<span class="op">/</span><span class="dv">100</span>)</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a><span class="co"># priors</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>ur_by_industry_copy <span class="op">=</span> ur_by_industry.copy()</span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>ur_by_industry_copy <span class="op">=</span> ur_by_industry_copy.set_index(<span class="st">'Industry'</span>)</span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>prior_mu_alpha_vals <span class="op">=</span> np.array([ur_by_industry_copy.loc[ind, <span class="st">'mean_ur_logit'</span>] <span class="cf">for</span> ind <span class="kw">in</span> industry_names])</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>prior_sigma_alpha_vals <span class="op">=</span> np.array([ur_by_industry_copy.loc[ind, <span class="st">'sd_ur_logit'</span>] <span class="cf">for</span> ind <span class="kw">in</span> industry_names])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="industry-model---train-test-split" class="level3" data-number="4.10">
<h3 data-number="4.10" class="anchored" data-anchor-id="industry-model---train-test-split"><span class="header-section-number">4.10</span> Industry model - Train-test split</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>train_df_industry_survey, test_df_industry_survey <span class="op">=</span> train_test_split(survey_df_industry, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="industry-model---define-the-adaptive-pooling-pymc-model" class="level3" data-number="4.11">
<h3 data-number="4.11" class="anchored" data-anchor-id="industry-model---define-the-adaptive-pooling-pymc-model"><span class="header-section-number">4.11</span> Industry model - Define the Adaptive pooling PyMC model</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the PGM model with train data</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> {<span class="st">"industry"</span>: industry_names}</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pm.Model(coords<span class="op">=</span>coords) <span class="im">as</span> unemployment_industry_model:</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    industry_idx_obs <span class="op">=</span> pm.Data(<span class="st">"industry_idx_obs"</span>, X_train_ind[<span class="st">'industry_idx'</span>], dims<span class="op">=</span><span class="st">"obs_id"</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Global Priors </span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    sigma <span class="op">=</span> pm.Exponential(<span class="st">"sigma"</span>, <span class="dv">1</span>) <span class="co"># standard deviation for alpha_industry</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Industry-Specific Parameters - observed industry means</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    mu_alpha_industry <span class="op">=</span> pm.Data(<span class="st">"mu_alpha_industry"</span>, prior_mu_alpha_vals, dims<span class="op">=</span><span class="st">"industry"</span>) <span class="co"># history industry means</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    alpha_industry <span class="op">=</span> pm.Normal(<span class="st">"alpha_industry"</span>, </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                                mu<span class="op">=</span>mu_alpha_industry, <span class="co"># historical industry means distribution</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>                                sigma<span class="op">=</span>sigma,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>                                dims<span class="op">=</span><span class="st">"industry"</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Probability of unemployment of each industry determined by alpha_industry</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    p_unemployment <span class="op">=</span> pm.Deterministic(<span class="st">"p_unemployment"</span>, pm.math.invlogit(alpha_industry[industry_idx_obs]), dims<span class="op">=</span><span class="st">'obs_id'</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    unemployment_obs <span class="op">=</span> pm.Data(<span class="st">"unemployment_obs"</span>, y_train_ind, dims<span class="op">=</span><span class="st">"obs_id"</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Observed data - unemployment status</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    unemployment <span class="op">=</span> pm.Bernoulli(<span class="st">"unemployment"</span>, p<span class="op">=</span>p_unemployment, observed<span class="op">=</span>unemployment_obs, dims<span class="op">=</span><span class="st">"obs_id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="industry-model---visualize-pgm" class="level3" data-number="4.12">
<h3 data-number="4.12" class="anchored" data-anchor-id="industry-model---visualize-pgm"><span class="header-section-number">4.12</span> Industry model - Visualize PGM</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">## 4.Visualize the PGM</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>pm.model_to_graphviz(unemployment_industry_model)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="3973ccbc" class="cell" data-execution_count="28">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/cell-29-output-1.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="index_files/figure-html/cell-29-output-1.svg" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="industry-model---estimate-model-parameters" class="level3" data-number="4.13">
<h3 data-number="4.13" class="anchored" data-anchor-id="industry-model---estimate-model-parameters"><span class="header-section-number">4.13</span> Industry model - Estimate model parameters</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Starting Industry Model Sampling..."</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> unemployment_industry_model:</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    industry_idata <span class="op">=</span> pm.sample(tune <span class="op">=</span> <span class="dv">500</span>, draws<span class="op">=</span><span class="dv">500</span>, random_seed<span class="op">=</span><span class="dv">5650</span>) <span class="co"># reduce the draws due to the size of the data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="598619ae" class="cell" data-execution_count="29">
<div class="cell-output cell-output-stdout">
<pre><code>Starting Industry Model Sampling...</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"04b0ce553b4b45a2925e47c042c1033d","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Posterior mean</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>industry_idata_post_mean <span class="op">=</span> industry_idata.posterior.mean(dim<span class="op">=</span>(<span class="st">"chain"</span>, <span class="st">"draw"</span>))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>industry_idata_post_mean_iter <span class="op">=</span> industry_idata_post_mean.sortby(<span class="st">"alpha_industry"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>industry_idata_post_mean_iter[<span class="st">'alpha_prob'</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> np.exp(<span class="op">-</span>industry_idata_post_mean_iter[<span class="st">'alpha_industry'</span>]))</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>industry_idata_post_mean.to_dataframe()</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>industry_idata_post_mean_hdi <span class="op">=</span> az.hdi(industry_idata)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>industry_idata_post_mean_hdi_iter <span class="op">=</span> industry_idata_post_mean_hdi.sortby(industry_idata_post_mean_iter.alpha_industry)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>industry_idata_post_mean_hdi_iter[<span class="st">'alpha_prob'</span>]<span class="op">=</span><span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> np.exp(<span class="op">-</span>industry_idata_post_mean_hdi_iter[<span class="st">'alpha_industry'</span>]))</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>industry_idata_post_mean_hdi_iter.to_dataframe()</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the posterior alpha_industry (mean of unemployment)</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>industry_idata_post_mean_iter.plot.scatter(x<span class="op">=</span><span class="st">'industry'</span>, y<span class="op">=</span><span class="st">"alpha_prob"</span>, ax<span class="op">=</span>ax, alpha<span class="op">=</span><span class="fl">0.8</span>, s<span class="op">=</span><span class="dv">80</span>)</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>ax.vlines(</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    np.arange(industry_names.size),</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    industry_idata_post_mean_hdi_iter.alpha_prob.sel(hdi<span class="op">=</span><span class="st">"lower"</span>),</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    industry_idata_post_mean_hdi_iter.alpha_prob.sel(hdi<span class="op">=</span><span class="st">"higher"</span>),</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"orange"</span>,</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.6</span>,</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="dv">3</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.6</span>, color<span class="op">=</span><span class="st">'lightgray'</span>)     </span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">'x'</span>, labelsize<span class="op">=</span><span class="dv">10</span>, rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Industry'</span>, fontsize <span class="op">=</span> <span class="dv">12</span>)</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Posterior means'</span>, fontsize <span class="op">=</span> <span class="dv">12</span>)</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Estimated Industry-Specific Unemployment Rate (Adaptive Pooling)"</span>, y<span class="op">=</span><span class="fl">1.02</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>plt.tight_layout() </span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="cell-fig-industry-pgm-scatter" class="cell" data-execution_count="30">
<div class="cell-output cell-output-display">
<div id="fig-industry-pgm-scatter" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Plot the scatter plot of the estimated unemployment rates by industries">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-industry-pgm-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-industry-pgm-scatter-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14" title="Figure&nbsp;8: Estimated Industry-Specific Unemployment Rate (Adaptive Pooliing)"><img src="index_files/figure-html/fig-industry-pgm-scatter-output-1.png" alt="Plot the scatter plot of the estimated unemployment rates by industries" width="951" height="755" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-industry-pgm-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Estimated Industry-Specific Unemployment Rate (Adaptive Pooliing)
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="industry-model---extract-posterior-predictive-distribution-on-test-data" class="level3" data-number="4.14">
<h3 data-number="4.14" class="anchored" data-anchor-id="industry-model---extract-posterior-predictive-distribution-on-test-data"><span class="header-section-number">4.14</span> Industry model - Extract Posterior Predictive Distribution on Test data</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update to test data</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> unemployment_industry_model:</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    pm.set_data({<span class="st">"unemployment_obs"</span>: y_test_ind,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"industry_idx_obs"</span>: X_test_ind[<span class="st">'industry_idx'</span>]})</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> unemployment_industry_model:</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    industry_test_idata <span class="op">=</span> pm.sample_posterior_predictive(industry_idata, random_seed<span class="op">=</span><span class="dv">5650</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="61d12056" class="cell" data-execution_count="31">
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"17424506a88e4673aa19bf537404e6ed","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
</section>
<section id="industry-model---extract-posterior-predictive-distribution-on-test-data-1" class="level3" data-number="4.15">
<h3 data-number="4.15" class="anchored" data-anchor-id="industry-model---extract-posterior-predictive-distribution-on-test-data-1"><span class="header-section-number">4.15</span> Industry model - Extract Posterior Predictive Distribution on Test data</h3>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update to test data</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> unemployment_industry_model:</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    pm.set_data({<span class="st">"unemployment_obs"</span>: y_test_ind,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"industry_idx_obs"</span>: X_test_ind[<span class="st">'industry_idx'</span>]})</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> unemployment_industry_model:</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    industry_test_idata <span class="op">=</span> pm.sample_posterior_predictive(industry_idata, random_seed<span class="op">=</span><span class="dv">5650</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="9283b594" class="cell" data-execution_count="32">
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"9d1849886d614ff79698564157d23c73","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
</section>
<section id="industry-model---plot-predictive-vs.-unemployment-rate-in-the-test-data" class="level3" data-number="4.16">
<h3 data-number="4.16" class="anchored" data-anchor-id="industry-model---plot-predictive-vs.-unemployment-rate-in-the-test-data"><span class="header-section-number">4.16</span> Industry model - Plot predictive vs.&nbsp;unemployment rate in the test data</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract means of unemployment values from the posterior predictive distribution given test data</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>industry_test_meanunemployment <span class="op">=</span> industry_test_idata.posterior_predictive[<span class="st">'unemployment'</span>].mean(dim<span class="op">=</span>[<span class="st">'chain'</span>,<span class="st">'draw'</span>])</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the predictive posterior means to the test dataframe</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>ind_rate_df <span class="op">=</span> test_df_industry_survey[[<span class="st">'industry_name'</span>,<span class="st">'unemployment_status'</span>]]</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>ind_rate_df[<span class="st">'unemployment_mean_pred'</span>] <span class="op">=</span> industry_test_meanunemployment</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>ind_rate_df <span class="op">=</span> ind_rate_df.groupby(<span class="st">'industry_name'</span>).agg(</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    unemployment_mean_true <span class="op">=</span> (<span class="st">'unemployment_status'</span>,<span class="st">'mean'</span>), unemployment_mean_pred <span class="op">=</span> (<span class="st">'unemployment_mean_pred'</span>, <span class="st">'mean'</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-tbl-center="true" data-tbl-col="true" data-execution_count="33">
<div id="tbl-industry-posterior_predict-means" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-col="true" data-execution_count="33" data-tbl-center="true">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-industry-posterior_predict-means-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5: Predicted vs.&nbsp;True Unemployment Means By Industries
</figcaption>
<div aria-describedby="tbl-industry-posterior_predict-means-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">industry_name</th>
<th data-quarto-table-cell-role="th">unemployment_mean_true</th>
<th data-quarto-table-cell-role="th">unemployment_mean_pred</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Educational and health services</td>
<td>0.024175</td>
<td>0.024808</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Financial activities</td>
<td>0.023190</td>
<td>0.022936</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Information</td>
<td>0.060263</td>
<td>0.044089</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Leisure and hospitality</td>
<td>0.056349</td>
<td>0.057205</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Manufacturing</td>
<td>0.031208</td>
<td>0.031418</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Professional and business services</td>
<td>0.037860</td>
<td>0.038643</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Public administration</td>
<td>0.017827</td>
<td>0.018390</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Transportation and utilities</td>
<td>0.039534</td>
<td>0.036584</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Wholesale and retail trade</td>
<td>0.041667</td>
<td>0.042109</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p><a href="#tbl-industry-posterior_predict-means" class="quarto-xref">Table&nbsp;5</a> displays the predicted vs.&nbsp;true unemployment rate means broken down by industries. Now we are going to visualize by scatter plot.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatter plot</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="bu">len</span>(ind_rate_df))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize <span class="op">=</span> (<span class="dv">10</span>, <span class="dv">7</span>))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    x,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    ind_rate_df[<span class="st">'unemployment_mean_pred'</span>],</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> <span class="st">'skyblue'</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    label <span class="op">=</span> <span class="st">'Predicted Unemploymenet Rate'</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    x,</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    ind_rate_df[<span class="st">'unemployment_mean_true'</span>],</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'blue'</span>,</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    label <span class="op">=</span> <span class="st">'True Unemployment Rate'</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>ax.set_xticks(x)</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>ax.set_xticklabels(ind_rate_df[<span class="st">'industry_name'</span>],rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">"right"</span>)</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Mean Unemployment Rate"</span>)</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"True vs Predicted Mean Unemployment by Industry"</span>, y <span class="op">=</span> <span class="fl">1.02</span>)</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.show()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="cell-fig-scatter-industry-unemployment" class="cell" data-execution_count="34">
<div class="cell-output cell-output-display">
<div id="fig-scatter-industry-unemployment" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Plot the unemployment rate means predicted by industry PGM model and the survey results">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter-industry-unemployment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-scatter-industry-unemployment-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15" title="Figure&nbsp;9: Scatter Plot - Predictive Unemployment Rate vs.&nbsp;True Rate By Industries"><img src="index_files/figure-html/fig-scatter-industry-unemployment-output-1.png" alt="Plot the unemployment rate means predicted by industry PGM model and the survey results" width="946" height="660" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter-industry-unemployment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Scatter Plot - Predictive Unemployment Rate vs.&nbsp;True Rate By Industries
</figcaption>
</figure>
</div>
</div>
</div>
<p>The scatter plot (<a href="#fig-scatter-industry-unemployment" class="quarto-xref">Figure&nbsp;9</a>) compares true and predicted unemployment rates for each industry. Most industries show close alignment between the two measures, indicating good predictive accuracy. Alghouth Leisure and hospitality and Information show slightly higher gaps, suggesting the model under- or overestimates unemployment rates. Industries such as Leisure and hospitality and Information exhibit the highest unemployment rates, both in true and predicted values. In contrast, Public administration and Educational and health services have the lowest unemployment rates, which is same as what is observed from the historical data.</p>
<p>Finally, we are analyzing the difference of the unemployment between recent gradatues and non recent graduates, and its interactive effect with education_attainment.</p>
</section>
</section>
<section id="references" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Joseph2024" class="csl-entry" role="listitem">
Joseph Dean, Estee Smith. 2024. <span>“<a href="">Gender Differences in Unemployment Trends: Race, Jobs and the Economy Update for February 2024</a>.”</span> <em>NCRC</em>, March.
</div>
<div id="ref-TOIEducation2025" class="csl-entry" role="listitem">
TOIEducation. 2025. <span>“<a href="">Degrees at Risk: 10 US College Majors with the Highest Unemployment Rate in 2025</a>.”</span> <em>The Times Of India</em>, July.
</div>
<div id="ref-Oberlo2024" class="csl-entry" role="listitem">
<span>“<a href="">US UNEMPLOYMENT RATE BY INDUSTRY (2024)</a>.”</span> 2024. <em>Oberlo</em>.
</div>
<div id="ref-ValerieWilson2022" class="csl-entry" role="listitem">
Wilson, Valerie, and William Darity-Jr. 2022. <span>“<a href="">Understanding Black-White Disparities in Labor Market Outcomes Requires Models That Account for Persistent Discrimination and Unequal Bargaining Power</a>.”</span> <em>Economic Policy Institute</em>, March.
</div>
<div id="ref-YiLiChienandPaulMorris" class="csl-entry" role="listitem">
YiLi Chien, Paul Morris. 2016. <span>“<a href="">Unemployment by Industry: Duration Must Be Considered, Too</a>.”</span> <em>Federal Reserve Bank of St.Lois - Regional Economist</em>, January.
</div>
</div>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{wei2025,
  author = {Wei, Mengjia},
  title = {Causal {Inference} of {Labor} {Market} {Inequality} {Using}
    {PGM:} {A} Multidimensional Analysis of Unemployment Rate and
    Durations},
  date = {2025-08-11},
  langid = {en},
  abstract = {This study investigates the causal relationships between
    race, industry, recent graduate, education attainment and
    unemployment rates in the United States by applying probabilistic
    graphical modeling (PGM) to uncover latent dependency structures
    across demographic and industry variables. Using a PGM framework, we
    construct conditional dependence networks to examine two primary
    dimensions: racial disparities and industry-specific unemployment
    dynamics. The analysis first explores the effect of race on
    unemployment disparities, followed by a sectoral analysis focused on
    Educational and Health Services, Financial Activities, Public
    Administration, Information, Leisure and Hospitality, Manufacturing,
    Professional and Business Services, Transportation and Utilities,
    and Wholesale and Retail Trade. This study aims to identify whether
    certain groups—such as Black workers and those employed in Leisure
    and Hospitality—face heightened unemployment risk, providing a more
    comprehensive view of labor market hardship. The model estimates the
    strength and direction of probabilistic dependencies using Bayesian
    structure learning algorithms, based on BLS Current Population
    Survey (CPS) data from 2015 to 2025. Findings reveal significant
    causal effects between race and industry on unemployment. In
    particular, Black workers in the Leisure and Hospitality sector face
    notably higher unemployment vulnerability compared to their White
    and Asian counterparts. Moreover, Leisure and Hospitality exhibits
    the strongest positive causal effect on unemployment likelihood.
    This study also explores the causal inference of the recent
    graduates on unemployment rate under the interactive effect with
    their education attainment (Bachelor’s or Master’s) in order to
    understand whether recent graduates have higher unemployment rate
    than non-recent graduates in 2025, and the difference between
    persons who have Bachelor’s degree vs. those with Master’s degree.
    These results contribute to the growing literature leveraging PGMs
    for social inference (e.g., Li et al., 2022), and demonstrate the
    model’s utility in uncovering structural labor market inequalities
    across population subgroups.}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-wei2025" class="csl-entry quarto-appendix-citeas" role="listitem">
Wei, Mengjia. 2025. <span>“Causal Inference of Labor Market Inequality
Using PGM: A Multidimensional Analysis of Unemployment Rate and
Durations.”</span> Georgetown Univeristy DSAN 5650 Journal. August 11,
2025.
</div></div></section></div></main>
<!-- /main column -->
<script type="application/vnd.jupyter.widget-state+json">
{"state":{"04b0ce553b4b45a2925e47c042c1033d":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_53f487345ad945118e7cde9414ffe6a5","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">                                                                                                                   \n <span style=\"font-weight: bold\"> Progress                  </span> <span style=\"font-weight: bold\"> Draws </span> <span style=\"font-weight: bold\"> Divergences </span> <span style=\"font-weight: bold\"> Step size </span> <span style=\"font-weight: bold\"> Grad evals </span> <span style=\"font-weight: bold\"> Sampling Speed </span> <span style=\"font-weight: bold\"> Elapsed </span> <span style=\"font-weight: bold\"> Remaining </span> \n ───────────────────────────────────────────────────────────────────────────────────────────────────────────────── \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   1000    0             0.60        7            8.99 draws/s     0:01:51   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   1000    0             0.82        7            9.11 draws/s     0:01:49   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   1000    0             0.79        3            8.97 draws/s     0:01:51   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   1000    0             0.56        7            8.94 draws/s     0:01:51   0:00:00    \n                                                                                                                   \n</pre>\n","text/plain":"                                                                                                                   \n \u001b[1m \u001b[0m\u001b[1mProgress                 \u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mDraws\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mDivergences\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mStep size\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mGrad evals\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mSampling Speed\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mElapsed\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mRemaining\u001b[0m\u001b[1m \u001b[0m \n ───────────────────────────────────────────────────────────────────────────────────────────────────────────────── \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   1000    0             0.60        7            8.99 draws/s     0:01:51   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   1000    0             0.82        7            9.11 draws/s     0:01:49   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   1000    0             0.79        3            8.97 draws/s     0:01:51   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   1000    0             0.56        7            8.94 draws/s     0:01:51   0:00:00    \n                                                                                                                   \n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"17424506a88e4673aa19bf537404e6ed":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_c9ee2aa7c3ae4559873f44145f8733ea","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Sampling ... <span style=\"color: #008000; text-decoration-color: #008000\">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span style=\"color: #800080; text-decoration-color: #800080\">100%</span> 0:00:00 / 0:00:04\n</pre>\n","text/plain":"Sampling ... \u001b[32m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[35m100%\u001b[0m 0:00:00 / 0:00:04\n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"2618e0b8f47541a980834e38f6384a17":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"53f487345ad945118e7cde9414ffe6a5":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"687e387871314529b9fa0b972d362892":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_f52d7e67d25e45928b3ce69862ce68c2","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">                                                                                                                   \n <span style=\"font-weight: bold\"> Progress                  </span> <span style=\"font-weight: bold\"> Draws </span> <span style=\"font-weight: bold\"> Divergences </span> <span style=\"font-weight: bold\"> Step size </span> <span style=\"font-weight: bold\"> Grad evals </span> <span style=\"font-weight: bold\"> Sampling Speed </span> <span style=\"font-weight: bold\"> Elapsed </span> <span style=\"font-weight: bold\"> Remaining </span> \n ───────────────────────────────────────────────────────────────────────────────────────────────────────────────── \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   1500    0             0.42        7            43.87 draws/s    0:00:34   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   1500    0             0.24        11           44.30 draws/s    0:00:33   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   1500    0             0.31        15           43.85 draws/s    0:00:34   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   1500    0             0.25        7            43.91 draws/s    0:00:34   0:00:00    \n                                                                                                                   \n</pre>\n","text/plain":"                                                                                                                   \n \u001b[1m \u001b[0m\u001b[1mProgress                 \u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mDraws\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mDivergences\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mStep size\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mGrad evals\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mSampling Speed\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mElapsed\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mRemaining\u001b[0m\u001b[1m \u001b[0m \n ───────────────────────────────────────────────────────────────────────────────────────────────────────────────── \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   1500    0             0.42        7            43.87 draws/s    0:00:34   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   1500    0             0.24        11           44.30 draws/s    0:00:33   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   1500    0             0.31        15           43.85 draws/s    0:00:34   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   1500    0             0.25        7            43.91 draws/s    0:00:34   0:00:00    \n                                                                                                                   \n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"73019b7a891d49b19a9fbc939878bba6":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"9d1849886d614ff79698564157d23c73":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_2618e0b8f47541a980834e38f6384a17","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Sampling ... <span style=\"color: #008000; text-decoration-color: #008000\">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span style=\"color: #800080; text-decoration-color: #800080\">100%</span> 0:00:00 / 0:00:04\n</pre>\n","text/plain":"Sampling ... \u001b[32m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[35m100%\u001b[0m 0:00:00 / 0:00:04\n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"c14ff6ccad7040a1bc891596c06fa52d":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_73019b7a891d49b19a9fbc939878bba6","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Sampling ... <span style=\"color: #008000; text-decoration-color: #008000\">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span style=\"color: #800080; text-decoration-color: #800080\">100%</span> 0:00:00 / 0:00:01\n</pre>\n","text/plain":"Sampling ... \u001b[32m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[35m100%\u001b[0m 0:00:00 / 0:00:01\n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"c9ee2aa7c3ae4559873f44145f8733ea":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"f52d7e67d25e45928b3ce69862ce68c2":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}}},"version_major":2,"version_minor":0}
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>